{"ast":null,"code":"import * as i0 from \"@angular/core\";\nclass CartService {}\nCartService.ɵfac = function CartService_Factory(t) {\n  return new (t || CartService)();\n};\nCartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CartService,\n  factory: CartService.ɵfac,\n  providedIn: 'root'\n});\nexport { CartService };","map":{"version":3,"names":["CartService","factory","ɵfac","providedIn"],"sources":["C:\\Users\\josed\\Escritorio\\WebDev\\1 ANGULAR\\frontEcommerceAngular\\src\\app\\services\\cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject, tap } from 'rxjs';\nimport { AuthService } from './auth.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService implements {\n\n\n  private apiUrl = 'http://localhost:8000/api/purchases/shoppingcart'\n\n\n  constructor(private http: HttpClient, private authService: AuthService) {}\n\n  private shoppingCart: BehaviorSubject<ShoppingCart> = new BehaviorSubject<ShoppingCart>({\n    shoppingCart_id: '',\n    shoppingCart_created_at: '',\n    shoppingCart_updated_at: '',\n    shoppingCart_items: [],\n    shoppingCart_user_id: ''\n  });\n\n  shoppingCart$ = this.shoppingCart.asObservable()\n\n  private shoppingCartAmount: BehaviorSubject<any> = new BehaviorSubject<any>(0);\n  shoppingCartAmount$ = this.shoppingCartAmount.asObservable()\n  currentAmount: number = 0\n\n  getItemsFromShoppingCart() {\n    const refreshToken = this.authService.getRefreshToken();\n    if (refreshToken) {\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${refreshToken}`\n      });\n      let items = []\n      const itemsFromCart = this.http.get<ShoppingCart>(`${this.apiUrl}/get-items-from-cart`, { headers })\n      itemsFromCart.subscribe((data: ShoppingCart)=>{\n        console.log('acaaaa' + data.shoppingCart_items)\n        items = data.shoppingCart_items\n        console.log(items)\n        this.shoppingCart.next(data);\n      })\n    }\n    return null\n  }\n\n  addToCart(itemId: any) {\n    const refreshToken = this.authService.getRefreshToken();\n    if (refreshToken) {\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${refreshToken}`\n      });\n      return this.http.post<any>(`${this.apiUrl}/add`, { items: itemId }, { headers }).subscribe(data => {\n        console.log(data)\n      })\n    }\n    return null\n  }\n\n\n}\ninterface ShoppingCart {\n  shoppingCart_id: string;\n  shoppingCart_created_at: string;\n  shoppingCart_updated_at: string;\n  shoppingCart_items: string[];\n  shoppingCart_user_id: string;\n}"],"mappings":";AAKA,MAGaA,WAAW;AAAXA,WAAW,C;mBAAXA,WAAW;AAAA;AAAXA,WAAW,C;SAAXA,WAAW;EAAAC,OAAA,EAAXD,WAAW,CAAAE,IAAA;EAAAC,UAAA,EAFV;AAAM;SAEPH,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}