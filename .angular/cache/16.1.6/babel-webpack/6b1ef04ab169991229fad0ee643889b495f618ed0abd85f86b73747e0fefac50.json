{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AdminPanelComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 9);\n    i0.ɵɵelement(2, \"img\", 10);\n    i0.ɵɵelementStart(3, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function AdminPanelComponent_div_13_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const img_r2 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.deleteItem(img_r2));\n    });\n    i0.ɵɵtext(4, \"ELIMINAR\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 12)(6, \"h5\", 13);\n    i0.ɵɵtext(7, \"Card title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 14);\n    i0.ɵɵtext(9, \"Some quick example text to build on the card title and make up the bulk of the card's content.\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const img_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", img_r2.imges[0], i0.ɵɵsanitizeUrl);\n  }\n}\nclass AdminPanelComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.imgs = [];\n    this.product = {\n      productName: '',\n      description: '',\n      totalAmount: 0,\n      quantity: 0\n    };\n    this.selectedFile = null;\n    this.getData();\n    // Suscribirse a la notificación de productos agregados o eliminados\n    this.productAddedSubscription = this.productService.onProductChange().subscribe(() => {\n      this.getData();\n    });\n  }\n  deleteItem(i) {\n    this.productService.deleteItem(i);\n  }\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n  }\n  getData() {\n    this.imgs = [];\n    this.productService.getProducts().subscribe(reso => {\n      console.log(reso);\n      this.response = reso;\n      reso.forEach(element => {\n        const base64Image = this.productService.arrayBufferToBase64(element.imageData.data);\n        element.imges = ['data:' + element.imageData.type + ';base64,' + base64Image];\n      });\n    });\n  }\n  onSubmit(form) {\n    if (form.valid && this.selectedFile) {\n      this.productService.addProduct(this.product, this.selectedFile).subscribe(response => {\n        console.log(response);\n        form.reset();\n        if (response) {\n          // Response de exito es 'Producto agregado exitosamente:'\n          console.log('Producto agregado exitosamente:', response);\n        }\n      });\n    }\n  }\n  ngOnDestroy() {\n    this.productAddedSubscription.unsubscribe();\n  }\n}\nAdminPanelComponent.ɵfac = function AdminPanelComponent_Factory(t) {\n  return new (t || AdminPanelComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n};\nAdminPanelComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AdminPanelComponent,\n  selectors: [[\"app-admin-panel\"]],\n  decls: 14,\n  vars: 5,\n  consts: [[3, \"submit\"], [\"productForm\", \"ngForm\"], [\"type\", \"text\", \"name\", \"productName\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"description\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"name\", \"totalAmount\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"name\", \"quantity\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", \"accept\", \"image/*\", \"required\", \"\", 3, \"change\"], [\"type\", \"submit\"], [4, \"ngFor\", \"ngForOf\"], [1, \"card\", 2, \"width\", \"18rem\"], [\"alt\", \"Product Image\", 2, \"width\", \"300px\", \"height\", \"350px\", 3, \"src\"], [\"href\", \"#\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"]],\n  template: function AdminPanelComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r6 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"ADMIN PANEL works!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"br\");\n      i0.ɵɵtext(3, \" ADD PRODUCT\\n\");\n      i0.ɵɵelementStart(4, \"form\", 0, 1);\n      i0.ɵɵlistener(\"submit\", function AdminPanelComponent_Template_form_submit_4_listener() {\n        i0.ɵɵrestoreView(_r6);\n        const _r0 = i0.ɵɵreference(5);\n        return i0.ɵɵresetView(ctx.onSubmit(_r0));\n      });\n      i0.ɵɵelementStart(6, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function AdminPanelComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.product.productName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function AdminPanelComponent_Template_input_ngModelChange_7_listener($event) {\n        return ctx.product.description = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function AdminPanelComponent_Template_input_ngModelChange_8_listener($event) {\n        return ctx.product.totalAmount = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function AdminPanelComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.product.quantity = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"input\", 6);\n      i0.ɵɵlistener(\"change\", function AdminPanelComponent_Template_input_change_10_listener($event) {\n        return ctx.onFileSelected($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"button\", 7);\n      i0.ɵɵtext(12, \"Enviar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(13, AdminPanelComponent_div_13_Template, 10, 1, \"div\", 8);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.product.productName);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngModel\", ctx.product.description);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngModel\", ctx.product.totalAmount);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngModel\", ctx.product.quantity);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.response);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { AdminPanelComponent };","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵlistener","AdminPanelComponent_div_13_Template_button_click_3_listener","restoredCtx","ɵɵrestoreView","_r5","img_r2","$implicit","ctx_r4","ɵɵnextContext","ɵɵresetView","deleteItem","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","imges","ɵɵsanitizeUrl","AdminPanelComponent","constructor","productService","imgs","product","productName","description","totalAmount","quantity","selectedFile","getData","productAddedSubscription","onProductChange","subscribe","i","onFileSelected","event","target","files","getProducts","reso","console","log","response","forEach","element","base64Image","arrayBufferToBase64","imageData","data","type","onSubmit","form","valid","addProduct","reset","ngOnDestroy","unsubscribe","ɵɵdirectiveInject","i1","ProductService","selectors","decls","vars","consts","template","AdminPanelComponent_Template","rf","ctx","AdminPanelComponent_Template_form_submit_4_listener","_r6","_r0","ɵɵreference","AdminPanelComponent_Template_input_ngModelChange_6_listener","$event","AdminPanelComponent_Template_input_ngModelChange_7_listener","AdminPanelComponent_Template_input_ngModelChange_8_listener","AdminPanelComponent_Template_input_ngModelChange_9_listener","AdminPanelComponent_Template_input_change_10_listener","ɵɵtemplate","AdminPanelComponent_div_13_Template"],"sources":["C:\\Users\\josed\\Escritorio\\WebDev\\1 ANGULAR\\frontEcommerceAngular\\src\\app\\admin-panel\\admin-panel.component.ts","C:\\Users\\josed\\Escritorio\\WebDev\\1 ANGULAR\\frontEcommerceAngular\\src\\app\\admin-panel\\admin-panel.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ProductService } from '../services/product.service';\nimport { ProductInterface } from '../interfaces/product.interface';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-admin-panel',\n  templateUrl: './admin-panel.component.html',\n  styleUrls: ['./admin-panel.component.css']\n})\nexport class AdminPanelComponent {\n\n  response: any;\n  imgs: any[] = [];\n\n  product: ProductInterface = {\n    productName: '',\n    description: '',\n    totalAmount: 0,\n    quantity: 0\n  };\n\n  selectedFile: File | null = null;\n  private productAddedSubscription: Subscription;\n\n  constructor(private productService: ProductService) {\n    this.getData();\n    // Suscribirse a la notificación de productos agregados o eliminados\n    this.productAddedSubscription = this.productService.onProductChange().subscribe(() => {\n      this.getData();\n    });\n  }\n\n  deleteItem(i: any) {\n    this.productService.deleteItem(i)\n  }\n\n  onFileSelected(event: any) {\n    this.selectedFile = event.target.files[0];\n  }\n  getData() {\n    this.imgs = [];\n    this.productService.getProducts().subscribe((reso: any) => {\n      console.log(reso);\n      this.response = reso;\n      reso.forEach((element: any) => {\n        const base64Image = this.productService.arrayBufferToBase64(element.imageData.data);\n        element.imges = ['data:' + element.imageData.type + ';base64,' + base64Image];\n      });\n    });\n  }\n\n  onSubmit(form: any) {\n    if (form.valid && this.selectedFile) {\n      this.productService.addProduct(this.product, this.selectedFile)\n        .subscribe(response => {\n          console.log(response)\n          form.reset();\n          if (response) {\n            // Response de exito es 'Producto agregado exitosamente:'\n            console.log('Producto agregado exitosamente:', response);\n          }\n        });\n    }\n  }\n\n  ngOnDestroy() {\n    this.productAddedSubscription.unsubscribe();\n  }\n\n}\n","<p>ADMIN PANEL works!</p>\n\n<!-- <button (click)=\"getData()\">Click me!</button> -->\n\n<br>\n\nADD PRODUCT\n<form #productForm=\"ngForm\" (submit)=\"onSubmit(productForm)\">\n  <input type=\"text\" name=\"productName\" [(ngModel)]=\"product.productName\" required>\n  <input type=\"text\" name=\"description\" [(ngModel)]=\"product.description\" required>\n  <input type=\"number\" name=\"totalAmount\" [(ngModel)]=\"product.totalAmount\" required>\n  <input type=\"number\" name=\"quantity\" [(ngModel)]=\"product.quantity\" required>\n  <input type=\"file\" (change)=\"onFileSelected($event)\" accept=\"image/*\" required>\n  <button type=\"submit\">Enviar</button>\n</form>\n\n<div *ngFor=\"let img of response; let i = index\">\n  <div class=\"card\" style=\"width: 18rem;\">\n    <img [src]=\"img.imges[0]\" style=\"width: 300px; height: 350px;\" alt=\"Product Image\">\n    <button href=\"#\" class=\"btn btn-danger\" (click)=\"deleteItem(img)\">ELIMINAR</button>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Card title</h5>\n      <p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's\n        content.</p>\n    </div>\n  </div>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}