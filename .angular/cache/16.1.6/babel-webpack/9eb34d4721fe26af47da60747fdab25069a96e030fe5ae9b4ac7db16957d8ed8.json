{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nclass CartService {\n  constructor() {\n    this.shoppingCart = new BehaviorSubject({\n      itemsInShoppingCart: []\n    });\n    this.shoppingCart$ = this.shoppingCart.asObservable();\n    this.currentItems = [];\n    this.amountInShorrpingCart = new BehaviorSubject(0);\n    this.amountInShorrpingCart$ = this.shoppingCart.asObservable();\n    const savedCart = JSON.parse(localStorage.getItem('shoppingCart') ?? '[]');\n    if (savedCart && savedCart.length > 0) {\n      this.currentItems = savedCart;\n      this.shoppingCart.next({\n        itemsInShoppingCart: this.currentItems\n      });\n    }\n  }\n  addToCart(item) {\n    this.currentItems.push(item);\n    localStorage.setItem('shoppingCart', JSON.stringify(this.currentItems));\n    console.log(this.currentItems);\n    const cart = {\n      itemsInShoppingCart: this.currentItems\n    };\n    this.shoppingCart.next(cart);\n  }\n  saveCartInLocal() {\n    localStorage.setItem('shoppingCart', JSON.stringify(this.currentItems));\n    console.log(this.currentItems);\n    const cart = {\n      itemsInShoppingCart: this.currentItems\n    };\n    this.shoppingCart.next(cart);\n  }\n  deleteFromCart(product) {\n    this.currentItems = this.currentItems.filter(item => item !== product);\n    this.saveCartInLocal();\n  }\n  amountInShoppingCart() {}\n}\nCartService.ɵfac = function CartService_Factory(t) {\n  return new (t || CartService)();\n};\nCartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CartService,\n  factory: CartService.ɵfac,\n  providedIn: 'root'\n});\nexport { CartService };","map":{"version":3,"names":["BehaviorSubject","CartService","constructor","shoppingCart","itemsInShoppingCart","shoppingCart$","asObservable","currentItems","amountInShorrpingCart","amountInShorrpingCart$","savedCart","JSON","parse","localStorage","getItem","length","next","addToCart","item","push","setItem","stringify","console","log","cart","saveCartInLocal","deleteFromCart","product","filter","amountInShoppingCart","factory","ɵfac","providedIn"],"sources":["C:\\Users\\josed\\Escritorio\\WebDev\\1 ANGULAR\\frontEcommerceAngular\\src\\app\\services\\cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n\n  constructor() {\n    const savedCart = JSON.parse(localStorage.getItem('shoppingCart') ?? '[]');\n    if (savedCart && savedCart.length > 0) {\n      this.currentItems = savedCart;\n      this.shoppingCart.next({ itemsInShoppingCart: this.currentItems });\n    }\n   }\n\n  private shoppingCart: BehaviorSubject<ShoppingCart> = new BehaviorSubject<ShoppingCart>({ itemsInShoppingCart: []});\n  shoppingCart$ = this.shoppingCart.asObservable()\n  currentItems:any = [];\n\n  \n  private amountInShorrpingCart: BehaviorSubject<any> = new BehaviorSubject<any>(0);\n  amountInShorrpingCart$ = this.shoppingCart.asObservable()\n\n  addToCart(item:any){\n    this.currentItems.push(item);\n    localStorage.setItem('shoppingCart', JSON.stringify(this.currentItems));\n    console.log(this.currentItems)\n    const cart = { itemsInShoppingCart: this.currentItems };\n    this.shoppingCart.next(cart);\n  }\n\n  saveCartInLocal() {\n    localStorage.setItem('shoppingCart', JSON.stringify(this.currentItems));\n    console.log(this.currentItems)\n    const cart = { itemsInShoppingCart: this.currentItems };\n    this.shoppingCart.next(cart);\n    }\n\n    deleteFromCart(product: any){\n      this.currentItems = this.currentItems.filter((item: any) => item !== product);\n      this.saveCartInLocal()\n    }\n\n    amountInShoppingCart(){\n\n    }\n\n    \n}\n\ninterface Item {\n  id: string;\n  productName: string;\n  imges: string;\n  description: string;\n  totalAmount: string;\n  quantity: number;\n}\n\ninterface ShoppingCart {\n  itemsInShoppingCart: Item[];\n}"],"mappings":"AACA,SAASA,eAAe,QAAQ,MAAM;;AAEtC,MAGaC,WAAW;EAEtBC,YAAA;IAQQ,KAAAC,YAAY,GAAkC,IAAIH,eAAe,CAAe;MAAEI,mBAAmB,EAAE;IAAE,CAAC,CAAC;IACnH,KAAAC,aAAa,GAAG,IAAI,CAACF,YAAY,CAACG,YAAY,EAAE;IAChD,KAAAC,YAAY,GAAO,EAAE;IAGb,KAAAC,qBAAqB,GAAyB,IAAIR,eAAe,CAAM,CAAC,CAAC;IACjF,KAAAS,sBAAsB,GAAG,IAAI,CAACN,YAAY,CAACG,YAAY,EAAE;IAbvD,MAAMI,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC;IAC1E,IAAIJ,SAAS,IAAIA,SAAS,CAACK,MAAM,GAAG,CAAC,EAAE;MACrC,IAAI,CAACR,YAAY,GAAGG,SAAS;MAC7B,IAAI,CAACP,YAAY,CAACa,IAAI,CAAC;QAAEZ,mBAAmB,EAAE,IAAI,CAACG;MAAY,CAAE,CAAC;;EAErE;EAUDU,SAASA,CAACC,IAAQ;IAChB,IAAI,CAACX,YAAY,CAACY,IAAI,CAACD,IAAI,CAAC;IAC5BL,YAAY,CAACO,OAAO,CAAC,cAAc,EAAET,IAAI,CAACU,SAAS,CAAC,IAAI,CAACd,YAAY,CAAC,CAAC;IACvEe,OAAO,CAACC,GAAG,CAAC,IAAI,CAAChB,YAAY,CAAC;IAC9B,MAAMiB,IAAI,GAAG;MAAEpB,mBAAmB,EAAE,IAAI,CAACG;IAAY,CAAE;IACvD,IAAI,CAACJ,YAAY,CAACa,IAAI,CAACQ,IAAI,CAAC;EAC9B;EAEAC,eAAeA,CAAA;IACbZ,YAAY,CAACO,OAAO,CAAC,cAAc,EAAET,IAAI,CAACU,SAAS,CAAC,IAAI,CAACd,YAAY,CAAC,CAAC;IACvEe,OAAO,CAACC,GAAG,CAAC,IAAI,CAAChB,YAAY,CAAC;IAC9B,MAAMiB,IAAI,GAAG;MAAEpB,mBAAmB,EAAE,IAAI,CAACG;IAAY,CAAE;IACvD,IAAI,CAACJ,YAAY,CAACa,IAAI,CAACQ,IAAI,CAAC;EAC5B;EAEAE,cAAcA,CAACC,OAAY;IACzB,IAAI,CAACpB,YAAY,GAAG,IAAI,CAACA,YAAY,CAACqB,MAAM,CAAEV,IAAS,IAAKA,IAAI,KAAKS,OAAO,CAAC;IAC7E,IAAI,CAACF,eAAe,EAAE;EACxB;EAEAI,oBAAoBA,CAAA,GAEpB;;AAxCS5B,WAAW,C;mBAAXA,WAAW;AAAA;AAAXA,WAAW,C;SAAXA,WAAW;EAAA6B,OAAA,EAAX7B,WAAW,CAAA8B,IAAA;EAAAC,UAAA,EAFV;AAAM;SAEP/B,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}