{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet CartComponent = class CartComponent {\n  constructor(authService, cartService, productService, http) {\n    this.authService = authService;\n    this.productService = productService;\n    this.http = http;\n    this.productsInCart = [];\n    this.apiForPurchase = 'http://localhost:8000/api/payments/pay-with-stripe';\n  }\n  ngOnInit() {\n    this.getItemsInCart();\n  }\n  getItemsInCart() {\n    this.cartService.getItemsOnCart().subscribe(DATA => {\n      console.log(DATA);\n      let aver = [];\n      aver = DATA;\n      aver.forEach(element => {\n        const base64Image = this.productService.arrayBufferToBase64(element.imageData.data);\n        element.imges = ['data:' + element.imageData.type + ';base64,' + base64Image];\n        delete element.imageData; // Eliminar la propiedad imageData\n      });\n\n      this.productsInCart = DATA;\n    });\n  }\n  deleteFromCart(product) {\n    console.log(product.id);\n    let id = product.id;\n    this.cartService.deleteItemInCart(id);\n  }\n  payWithStripe() {\n    this.http.post(this.apiForPurchase, {\n      body\n    }, {\n      headers\n    });\n    // const updatedCart = this.shoppingCart.map((item: any) => ({\n    //   ...item,\n    //   price: item.price * 100 // Multiplicar el precio por 100\n    // }));\n    // console.log(this.shoppingCart)\n    // console.log(updatedCart)\n    // this.p.redirectToCheckout(updatedCart, 'Pago prueba Tiendita')\n  }\n};\n\nCartComponent = __decorate([Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})], CartComponent);\nexport { CartComponent };","map":{"version":3,"names":["Component","CartComponent","constructor","authService","cartService","productService","http","productsInCart","apiForPurchase","ngOnInit","getItemsInCart","getItemsOnCart","subscribe","DATA","console","log","aver","forEach","element","base64Image","arrayBufferToBase64","imageData","data","imges","type","deleteFromCart","product","id","deleteItemInCart","payWithStripe","post","body","headers","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\josed\\Escritorio\\WebDev\\1 ANGULAR\\frontEcommerceAngular\\src\\app\\components\\cart\\cart.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { CartService } from 'src/app/services/cart.service';\nimport { ProductService } from 'src/app/services/product.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent implements OnInit {\n\n  constructor( private authService: AuthServiceprivate cartService: CartService, private productService: ProductService, private http: HttpClient){}\n\n  productsInCart: any = []\n\n  private apiForPurchase = 'http://localhost:8000/api/payments/pay-with-stripe'\n\n  ngOnInit(): void {\n    this.getItemsInCart()  \n  }\n\n  getItemsInCart(){\n    this.cartService.getItemsOnCart().subscribe((DATA: any)=>{\n      console.log(DATA)\n      let aver = []\n      aver = DATA\n      aver.forEach((element: any) => {\n        const base64Image = this.productService.arrayBufferToBase64(element.imageData.data);\n        element.imges = ['data:' + element.imageData.type + ';base64,' + base64Image];\n        delete element.imageData; // Eliminar la propiedad imageData\n      });\n      this.productsInCart = DATA\n    })\n  }\n\n  deleteFromCart(product: any){\n    console.log(product.id)\n    let id: string = product.id\n    this.cartService.deleteItemInCart(id)\n  }\n\n  payWithStripe(){\n\n    this.http.post<any>(this.apiForPurchase, { body } , { headers })\n    // const updatedCart = this.shoppingCart.map((item: any) => ({\n    //   ...item,\n    //   price: item.price * 100 // Multiplicar el precio por 100\n    // }));\n\n    // console.log(this.shoppingCart)\n    // console.log(updatedCart)\n\n    // this.p.redirectToCheckout(updatedCart, 'Pago prueba Tiendita')\n  }\n  \n}\n"],"mappings":";AACA,SAASA,SAAS,QAAgB,eAAe;AASjD,IAAaC,aAAa,GAA1B,MAAaA,aAAa;EAExBC,YAAqBC,WAA+B,EAACC,WAAwB,EAAUC,cAA8B,EAAUC,IAAgB;IAA1H,KAAAH,WAAW,GAAXA,WAAW;IAAuD,KAAAE,cAAc,GAAdA,cAAc;IAA0B,KAAAC,IAAI,GAAJA,IAAI;IAEnI,KAAAC,cAAc,GAAQ,EAAE;IAEhB,KAAAC,cAAc,GAAG,oDAAoD;EAJoE;EAMjJC,QAAQA,CAAA;IACN,IAAI,CAACC,cAAc,EAAE;EACvB;EAEAA,cAAcA,CAAA;IACZ,IAAI,CAACN,WAAW,CAACO,cAAc,EAAE,CAACC,SAAS,CAAEC,IAAS,IAAG;MACvDC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;MACjB,IAAIG,IAAI,GAAG,EAAE;MACbA,IAAI,GAAGH,IAAI;MACXG,IAAI,CAACC,OAAO,CAAEC,OAAY,IAAI;QAC5B,MAAMC,WAAW,GAAG,IAAI,CAACd,cAAc,CAACe,mBAAmB,CAACF,OAAO,CAACG,SAAS,CAACC,IAAI,CAAC;QACnFJ,OAAO,CAACK,KAAK,GAAG,CAAC,OAAO,GAAGL,OAAO,CAACG,SAAS,CAACG,IAAI,GAAG,UAAU,GAAGL,WAAW,CAAC;QAC7E,OAAOD,OAAO,CAACG,SAAS,CAAC,CAAC;MAC5B,CAAC,CAAC;;MACF,IAAI,CAACd,cAAc,GAAGM,IAAI;IAC5B,CAAC,CAAC;EACJ;EAEAY,cAAcA,CAACC,OAAY;IACzBZ,OAAO,CAACC,GAAG,CAACW,OAAO,CAACC,EAAE,CAAC;IACvB,IAAIA,EAAE,GAAWD,OAAO,CAACC,EAAE;IAC3B,IAAI,CAACvB,WAAW,CAACwB,gBAAgB,CAACD,EAAE,CAAC;EACvC;EAEAE,aAAaA,CAAA;IAEX,IAAI,CAACvB,IAAI,CAACwB,IAAI,CAAM,IAAI,CAACtB,cAAc,EAAE;MAAEuB;IAAI,CAAE,EAAG;MAAEC;IAAO,CAAE,CAAC;IAChE;IACA;IACA;IACA;IAEA;IACA;IAEA;EACF;CAED;;AA9CY/B,aAAa,GAAAgC,UAAA,EALzBjC,SAAS,CAAC;EACTkC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,sBAAsB;CACnC,CAAC,C,EACWnC,aAAa,CA8CzB;SA9CYA,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}