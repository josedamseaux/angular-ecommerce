{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AdminPanelComponent = class AdminPanelComponent {\n  constructor(productService, UsersService) {\n    this.productService = productService;\n    this.imgs = [];\n    this.product = {\n      productName: '',\n      description: '',\n      totalAmount: 0,\n      quantity: 0\n    };\n    this.selectedFile = null;\n    this.getData();\n    // Suscribirse a la notificación de productos agregados o eliminados\n    this.productAddedSubscription = this.productService.onProductChange().subscribe(() => {\n      this.getData();\n    });\n  }\n  deleteItem(i) {\n    this.productService.deleteItem(i);\n  }\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n  }\n  getData() {\n    this.imgs = [];\n    this.productService.getProducts().subscribe(reso => {\n      console.log(reso);\n      this.response = reso;\n      reso.forEach(element => {\n        const base64Image = this.productService.arrayBufferToBase64(element.imageData.data);\n        element.imges = ['data:' + element.imageData.type + ';base64,' + base64Image];\n      });\n    });\n  }\n  onSubmit(form) {\n    if (form.valid && this.selectedFile) {\n      this.productService.addProduct(this.product, this.selectedFile).subscribe(response => {\n        console.log(response);\n        form.reset();\n        if (response) {\n          // Response de exito es 'Producto agregado exitosamente:'\n          console.log('Producto agregado exitosamente:', response);\n        }\n      });\n    }\n  }\n  ngOnDestroy() {\n    this.productAddedSubscription.unsubscribe();\n  }\n};\nAdminPanelComponent = __decorate([Component({\n  selector: 'app-admin-panel',\n  templateUrl: './admin-panel.component.html',\n  styleUrls: ['./admin-panel.component.css']\n})], AdminPanelComponent);\nexport { AdminPanelComponent };","map":{"version":3,"names":["Component","AdminPanelComponent","constructor","productService","UsersService","imgs","product","productName","description","totalAmount","quantity","selectedFile","getData","productAddedSubscription","onProductChange","subscribe","deleteItem","i","onFileSelected","event","target","files","getProducts","reso","console","log","response","forEach","element","base64Image","arrayBufferToBase64","imageData","data","imges","type","onSubmit","form","valid","addProduct","reset","ngOnDestroy","unsubscribe","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\josed\\Escritorio\\WebDev\\1 ANGULAR\\frontEcommerceAngular\\src\\app\\admin-panel\\admin-panel.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ProductService } from '../services/product.service';\nimport { ProductInterface } from '../interfaces/product.interface';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-admin-panel',\n  templateUrl: './admin-panel.component.html',\n  styleUrls: ['./admin-panel.component.css']\n})\nexport class AdminPanelComponent {\n\n  response: any;\n  imgs: any[] = [];\n\n  product: ProductInterface = {\n    productName: '',\n    description: '',\n    totalAmount: 0,\n    quantity: 0\n  };\n\n  selectedFile: File | null = null;\n  private productAddedSubscription: Subscription;\n\n  constructor(private productService: ProductService, UsersService) {\n    this.getData();\n    // Suscribirse a la notificación de productos agregados o eliminados\n    this.productAddedSubscription = this.productService.onProductChange().subscribe(() => {\n      this.getData();\n    });\n  }\n\n  deleteItem(i: any) {\n    this.productService.deleteItem(i)\n  }\n\n  onFileSelected(event: any) {\n    this.selectedFile = event.target.files[0];\n  }\n  getData() {\n    this.imgs = [];\n    this.productService.getProducts().subscribe((reso: any) => {\n      console.log(reso);\n      this.response = reso;\n      reso.forEach((element: any) => {\n        const base64Image = this.productService.arrayBufferToBase64(element.imageData.data);\n        element.imges = ['data:' + element.imageData.type + ';base64,' + base64Image];\n      });\n    });\n  }\n\n  onSubmit(form: any) {\n    if (form.valid && this.selectedFile) {\n      this.productService.addProduct(this.product, this.selectedFile)\n        .subscribe(response => {\n          console.log(response)\n          form.reset();\n          if (response) {\n            // Response de exito es 'Producto agregado exitosamente:'\n            console.log('Producto agregado exitosamente:', response);\n          }\n        });\n    }\n  }\n\n  ngOnDestroy() {\n    this.productAddedSubscription.unsubscribe();\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAUzC,IAAaC,mBAAmB,GAAhC,MAAaA,mBAAmB;EAe9BC,YAAoBC,cAA8B,EAAEC,YAAY;IAA5C,KAAAD,cAAc,GAAdA,cAAc;IAZlC,KAAAE,IAAI,GAAU,EAAE;IAEhB,KAAAC,OAAO,GAAqB;MAC1BC,WAAW,EAAE,EAAE;MACfC,WAAW,EAAE,EAAE;MACfC,WAAW,EAAE,CAAC;MACdC,QAAQ,EAAE;KACX;IAED,KAAAC,YAAY,GAAgB,IAAI;IAI9B,IAAI,CAACC,OAAO,EAAE;IACd;IACA,IAAI,CAACC,wBAAwB,GAAG,IAAI,CAACV,cAAc,CAACW,eAAe,EAAE,CAACC,SAAS,CAAC,MAAK;MACnF,IAAI,CAACH,OAAO,EAAE;IAChB,CAAC,CAAC;EACJ;EAEAI,UAAUA,CAACC,CAAM;IACf,IAAI,CAACd,cAAc,CAACa,UAAU,CAACC,CAAC,CAAC;EACnC;EAEAC,cAAcA,CAACC,KAAU;IACvB,IAAI,CAACR,YAAY,GAAGQ,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;EAC3C;EACAT,OAAOA,CAAA;IACL,IAAI,CAACP,IAAI,GAAG,EAAE;IACd,IAAI,CAACF,cAAc,CAACmB,WAAW,EAAE,CAACP,SAAS,CAAEQ,IAAS,IAAI;MACxDC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;MACjB,IAAI,CAACG,QAAQ,GAAGH,IAAI;MACpBA,IAAI,CAACI,OAAO,CAAEC,OAAY,IAAI;QAC5B,MAAMC,WAAW,GAAG,IAAI,CAAC1B,cAAc,CAAC2B,mBAAmB,CAACF,OAAO,CAACG,SAAS,CAACC,IAAI,CAAC;QACnFJ,OAAO,CAACK,KAAK,GAAG,CAAC,OAAO,GAAGL,OAAO,CAACG,SAAS,CAACG,IAAI,GAAG,UAAU,GAAGL,WAAW,CAAC;MAC/E,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEAM,QAAQA,CAACC,IAAS;IAChB,IAAIA,IAAI,CAACC,KAAK,IAAI,IAAI,CAAC1B,YAAY,EAAE;MACnC,IAAI,CAACR,cAAc,CAACmC,UAAU,CAAC,IAAI,CAAChC,OAAO,EAAE,IAAI,CAACK,YAAY,CAAC,CAC5DI,SAAS,CAACW,QAAQ,IAAG;QACpBF,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;QACrBU,IAAI,CAACG,KAAK,EAAE;QACZ,IAAIb,QAAQ,EAAE;UACZ;UACAF,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEC,QAAQ,CAAC;;MAE5D,CAAC,CAAC;;EAER;EAEAc,WAAWA,CAAA;IACT,IAAI,CAAC3B,wBAAwB,CAAC4B,WAAW,EAAE;EAC7C;CAED;AA5DYxC,mBAAmB,GAAAyC,UAAA,EAL/B1C,SAAS,CAAC;EACT2C,QAAQ,EAAE,iBAAiB;EAC3BC,WAAW,EAAE,8BAA8B;EAC3CC,SAAS,EAAE,CAAC,6BAA6B;CAC1C,CAAC,C,EACW5C,mBAAmB,CA4D/B;SA5DYA,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}